

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-cn" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-cn" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Let’s Make an xkcd JupyterLab Extension &mdash; JupyterLab 0.18.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Terminology" href="terminology.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> JupyterLab
          

          
          </a>

          
            
            
              <div class="version">
                0.18.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/starting.html">Starting JupyterLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/changelog.html">JupyterLab Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/interface.html">The JupyterLab Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/urls.html">JupyterLab URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/files.html">Working with Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/file_editor.html">Text Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/notebook.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/code_console.html">Code Consoles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/terminal.html">Terminals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/running.html">Managing Kernels and Terminals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/commands.html">Command Palette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/documents_kernels.html">Documents and Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/file_formats.html">File and Output Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/jupyterhub.html">JupyterLab on JupyterHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="repo.html">General Codebase Orientation</a></li>
<li class="toctree-l1"><a class="reference internal" href="extension_dev.html">Extension Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="documents.html">Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="documents.html#overview-of-document-architecture">Overview of document architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="css.html">CSS Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualdom.html">Virtual DOM and React</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_content.html">Adding Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Let’s Make an xkcd JupyterLab Extension</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup-a-development-environment">Setup a development environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-conda-using-miniconda">Install conda using miniconda</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-nodejs-jupyterlab-etc-in-a-conda-environment">Install NodeJS, JupyterLab, etc. in a conda environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-repository">Create a repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-an-extension-project">Create an extension project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initialize-the-project-from-a-cookiecutter">Initialize the project from a cookiecutter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-and-install-the-extension-for-development">Build and install the extension for development</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-the-initial-extension-in-action">See the initial extension in action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commit-what-you-have-to-git">Commit what you have to git</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#add-an-xkcd-widget">Add an xkcd widget</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#show-an-empty-panel">Show an empty panel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-a-comic-in-the-panel">Show a comic in the panel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#improve-the-widget-behavior">Improve the widget behavior</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#center-the-comic-and-add-attribution">Center the comic and add attribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-a-new-comic-on-demand">Show a new comic on demand</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restore-panel-state-when-the-browser-refreshes">Restore panel state when the browser refreshes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#publish-your-extension-to-npmjs-org">Publish your extension to npmjs.org</a></li>
<li class="toctree-l2"><a class="reference internal" href="#learn-more">Learn more</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">JupyterLab</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
  <li><a href="../index.html">Docs</a> &raquo;</li>
    
  <li>Let’s Make an xkcd JupyterLab Extension</li>

    
    <li class="wy-breadcrumbs-aside">
    
      
      
        <a href="https://github.com/denlly/jupyter-doc/blob/master/docs/source/developer/xkcd_extension_tutorial.rst" class="fa fa-github"> Edit on GitHub</a>
      
      
    
    </li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://jupyter.org/documentation">
        <img src="../_static/jupyter_logo.svg"></img>
        Jupyter
      </a>
      &vert;
      &nbsp;
    </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="let-s-make-an-xkcd-jupyterlab-extension">
<span id="xkcd-extension-tutorial"></span><h1>Let’s Make an xkcd JupyterLab Extension<a class="headerlink" href="#let-s-make-an-xkcd-jupyterlab-extension" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The extension developer API is not stable and will evolve in JupyterLab
releases in the near future.</p>
</div>
<p>JupyterLab extensions add features to the user experience. This page
describes how to create one type of extension, an <em>application plugin</em>,
that:</p>
<ul class="simple">
<li>Adds a “Random <a class="reference external" href="https://xkcd.com">xkcd</a> comic” command to the
<em>command palette</em> sidebar</li>
<li>Fetches the comic image and metadata when activated</li>
<li>Shows the image and metadata in a tab panel</li>
</ul>
<p>By working through this tutorial, you’ll learn:</p>
<ul class="simple">
<li>How to setup an extension development environment from scratch on a
Linux or OSX machine.<ul>
<li>Windows users: You’ll need to modify the commands slightly.</li>
</ul>
</li>
<li>How to start an extension project from
<a class="reference external" href="https://github.com/jupyterlab/extension-cookiecutter-ts">jupyterlab/extension-cookiecutter-ts</a></li>
<li>How to iteratively code, build, and load your extension in JupyterLab</li>
<li>How to version control your work with git</li>
<li>How to release your extension for others to enjoy</li>
</ul>
<p><img alt="Completed xkcd extension screenshot" src="../_images/xkcd_tutorial_complete.png" /></p>
<p>Sound like fun? Excellent. Here we go!</p>
<div class="section" id="setup-a-development-environment">
<h2>Setup a development environment<a class="headerlink" href="#setup-a-development-environment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-conda-using-miniconda">
<h3>Install conda using miniconda<a class="headerlink" href="#install-conda-using-miniconda" title="Permalink to this headline">¶</a></h3>
<p>Start by installing miniconda, following
<a class="reference external" href="https://conda.io/docs/user-guide/install/index.html">Conda’s installation documentation</a>.</p>
</div>
<div class="section" id="install-nodejs-jupyterlab-etc-in-a-conda-environment">
<span id="id1"></span><h3>Install NodeJS, JupyterLab, etc. in a conda environment<a class="headerlink" href="#install-nodejs-jupyterlab-etc-in-a-conda-environment" title="Permalink to this headline">¶</a></h3>
<p>Next create a conda environment that includes:</p>
<ol class="arabic simple">
<li>the latest release of JupyterLab</li>
<li><a class="reference external" href="https://github.com/audreyr/cookiecutter">cookiecutter</a>, the tool
you’ll use to bootstrap your extension project structure</li>
<li><a class="reference external" href="https://nodejs.org">NodeJS</a>, the JavaScript runtime you’ll use to
compile the web assets (e.g., TypeScript, CSS) for your extension</li>
<li><a class="reference external" href="https://git-scm.com">git</a>, a version control system you’ll use to
take snapshots of your work as you progress through this tutorial</li>
</ol>
<p>It’s best practice to leave the root conda environment, the one created
by the miniconda installer, untouched and install your project specific
dependencies in a named conda environment. Run this command to create a
new environment named <code class="docutils literal notranslate"><span class="pre">jupyterlab-ext</span></code>.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">jupyterlab</span><span class="o">-</span><span class="n">ext</span> <span class="n">nodejs</span> <span class="n">jupyterlab</span> <span class="n">cookiecutter</span> <span class="n">git</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
</pre></div>
</div>
<p>Now activate the new environment so that all further commands you run
work out of that environment.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">jupyterlab</span><span class="o">-</span><span class="n">ext</span>
</pre></div>
</div>
<p>Note: You’ll need to run the command above in each new terminal you open
before you can work with the tools you installed in the
<code class="docutils literal notranslate"><span class="pre">jupyterlab-ext</span></code> environment.</p>
</div>
</div>
<div class="section" id="create-a-repository">
<h2>Create a repository<a class="headerlink" href="#create-a-repository" title="Permalink to this headline">¶</a></h2>
<p>Create a new repository for your extension. For example, on
<a class="reference external" href="https://help.github.com/articles/create-a-repo/">GitHub</a>. This is an
optional step but highly recommended if you want to share your
extension.</p>
</div>
<div class="section" id="create-an-extension-project">
<h2>Create an extension project<a class="headerlink" href="#create-an-extension-project" title="Permalink to this headline">¶</a></h2>
<div class="section" id="initialize-the-project-from-a-cookiecutter">
<h3>Initialize the project from a cookiecutter<a class="headerlink" href="#initialize-the-project-from-a-cookiecutter" title="Permalink to this headline">¶</a></h3>
<p>Next use cookiecutter to create a new project for your extension.
This will create a new folder for your extension in your current directory.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cookiecutter</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jupyterlab</span><span class="o">/</span><span class="n">extension</span><span class="o">-</span><span class="n">cookiecutter</span><span class="o">-</span><span class="n">ts</span>
</pre></div>
</div>
<p>When prompted, enter values like the following for all of the
cookiecutter prompts.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">author_name</span> <span class="p">[]:</span> <span class="n">Your</span> <span class="n">Name</span>
<span class="n">extension_name</span> <span class="p">[</span><span class="n">myextension</span><span class="p">]:</span> <span class="n">jupyterlab_xkcd</span>
<span class="n">project_short_description</span> <span class="p">[</span><span class="n">A</span> <span class="n">JupyterLab</span> <span class="n">extension</span><span class="o">.</span><span class="p">]:</span> <span class="n">Show</span> <span class="n">a</span> <span class="n">random</span> <span class="n">xkcd</span><span class="o">.</span><span class="n">com</span> <span class="n">comic</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">JupyterLab</span> <span class="n">panel</span>
<span class="n">repository</span> <span class="p">[</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">my_name</span><span class="o">/</span><span class="n">jupyterlab_myextension</span><span class="p">]:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">my_name</span><span class="o">/</span><span class="n">jupyterlab_xkcd</span>
</pre></div>
</div>
<p>Note: if not using a repository, leave the field blank. You can come
back and edit the repository links in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file later.</p>
<p>Change to the directory the cookiecutter created and list the files.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">jupyterlab_xkcd</span>
<span class="n">ls</span>
</pre></div>
</div>
<p>You should see a list like the following.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">README</span><span class="o">.</span><span class="n">md</span>     <span class="n">package</span><span class="o">.</span><span class="n">json</span>  <span class="n">src</span>           <span class="n">style</span>         <span class="n">tsconfig</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="build-and-install-the-extension-for-development">
<h3>Build and install the extension for development<a class="headerlink" href="#build-and-install-the-extension-for-development" title="Permalink to this headline">¶</a></h3>
<p>Your new extension project has enough code in it to see it working in
your JupyterLab. Run the following commands to install the initial
project dependencies and install it in the JupyterLab environment. We
defer building since it will be built in the next step.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial uses <code class="docutils literal notranslate"><span class="pre">jlpm</span></code> to install Javascript packages and
run build commands, which is JupyterLab’s bundled
version of <code class="docutils literal notranslate"><span class="pre">yarn</span></code>. If you prefer, you can use another Javascript
package manager like <code class="docutils literal notranslate"><span class="pre">npm</span></code> or <code class="docutils literal notranslate"><span class="pre">yarn</span></code> itself.</p>
</div>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">install</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="o">.</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">build</span>
</pre></div>
</div>
<p>After the install completes, open a second terminal. Run these commands
to activate the <code class="docutils literal notranslate"><span class="pre">jupyterlab-ext</span></code> environment and to start a JupyterLab
instance in watch mode so that it will keep up with our changes as we
make them.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">jupyterlab</span><span class="o">-</span><span class="n">ext</span>
<span class="n">jupyter</span> <span class="n">lab</span> <span class="o">--</span><span class="n">watch</span>
</pre></div>
</div>
</div>
<div class="section" id="see-the-initial-extension-in-action">
<h3>See the initial extension in action<a class="headerlink" href="#see-the-initial-extension-in-action" title="Permalink to this headline">¶</a></h3>
<p>After building with your extension, JupyterLab should open in your
default web browser.</p>
<p>In that window open the JavaScript console
by following the instructions for your browser:</p>
<ul class="simple">
<li><a class="reference external" href="https://developer.chrome.com/devtools#access">Accessing the DevTools in Google
Chrome</a></li>
<li><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Tools/Web_Console/Opening_the_Web_Console">Opening the Web Console in
Firefox</a></li>
</ul>
<p>After you reload the page with the console open, you should see a message that says
<code class="docutils literal notranslate"><span class="pre">JupyterLab</span> <span class="pre">extension</span> <span class="pre">jupyterlab_xkcd</span> <span class="pre">is</span> <span class="pre">activated!</span></code> in the console.
If you do, congrats, you’re ready to start modifying the the extension!
If not, go back, make sure you didn’t miss a step, and <a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/README.md#getting-help">reach
out</a> if you’re stuck.</p>
<p>Note: Leave the terminal running the <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span> <span class="pre">--watch</span></code> command
open.</p>
</div>
<div class="section" id="commit-what-you-have-to-git">
<h3>Commit what you have to git<a class="headerlink" href="#commit-what-you-have-to-git" title="Permalink to this headline">¶</a></h3>
<p>Run the following commands in your <code class="docutils literal notranslate"><span class="pre">jupyterlab_xkcd</span></code> folder to
initialize it as a git repository and commit the current code.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">init</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Seed xkcd project from cookiecutter&#39;</span>
</pre></div>
</div>
<p>Note: This step is not technically necessary, but it is good practice to
track changes in version control system in case you need to rollback to
an earlier version or want to collaborate with others. For example, you
can compare your work throughout this tutorial with the commits in a
reference version of <code class="docutils literal notranslate"><span class="pre">jupyterlab_xkcd</span></code> on GitHub at
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd">https://github.com/jupyterlab/jupyterlab_xkcd</a>.</p>
</div>
</div>
<div class="section" id="add-an-xkcd-widget">
<h2>Add an xkcd widget<a class="headerlink" href="#add-an-xkcd-widget" title="Permalink to this headline">¶</a></h2>
<div class="section" id="show-an-empty-panel">
<h3>Show an empty panel<a class="headerlink" href="#show-an-empty-panel" title="Permalink to this headline">¶</a></h3>
<p>The <em>command palette</em> is the primary view of all commands available to
you in JupyterLab. For your first addition, you’re going to add a
<em>Random xkcd comic</em> command to the palette and get it to show an <em>xkcd</em>
tab panel when invoked.</p>
<p>Fire up your favorite text editor and open the <code class="docutils literal notranslate"><span class="pre">src/index.ts</span></code> file in
your extension project. Add the following import at the top of the file
to get a reference to the command palette interface.</p>
<div class="code typescript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span>
  <span class="n">ICommandPalette</span>
<span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@jupyterlab/apputils&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>You will also need to install this dependency. Run the following command in the
repository root folder install the dependency and save it to your
<cite>package.json</cite>:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">add</span> <span class="nd">@jupyterlab</span><span class="o">/</span><span class="n">apputils</span>
</pre></div>
</div>
<p>Locate the <code class="docutils literal notranslate"><span class="pre">extension</span></code> object of type <code class="docutils literal notranslate"><span class="pre">JupyterLabPlugin</span></code>. Change the
definition so that it reads like so:</p>
<div class="code typescript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Initialization</span> <span class="n">data</span> <span class="k">for</span> <span class="n">the</span> <span class="n">jupyterlab_xkcd</span> <span class="n">extension</span><span class="o">.</span>
 <span class="o">*/</span>
<span class="n">const</span> <span class="n">extension</span><span class="p">:</span> <span class="n">JupyterLabPlugin</span><span class="o">&lt;</span><span class="n">void</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nb">id</span><span class="p">:</span> <span class="s1">&#39;jupyterlab_xkcd&#39;</span><span class="p">,</span>
  <span class="n">autoStart</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="n">requires</span><span class="p">:</span> <span class="p">[</span><span class="n">ICommandPalette</span><span class="p">],</span>
  <span class="n">activate</span><span class="p">:</span> <span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">JupyterLab</span><span class="p">,</span> <span class="n">palette</span><span class="p">:</span> <span class="n">ICommandPalette</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;JupyterLab extension jupyterlab_xkcd is activated!&#39;</span><span class="p">);</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;ICommandPalette:&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">requires</span></code> attribute states that your plugin needs an object that
implements the <code class="docutils literal notranslate"><span class="pre">ICommandPalette</span></code> interface when it starts. JupyterLab
will pass an instance of <code class="docutils literal notranslate"><span class="pre">ICommandPalette</span></code> as the second parameter of
<code class="docutils literal notranslate"><span class="pre">activate</span></code> in order to satisfy this requirement. Defining
<code class="docutils literal notranslate"><span class="pre">palette:</span> <span class="pre">ICommandPalette</span></code> makes this instance available to your code
in that function. The second <code class="docutils literal notranslate"><span class="pre">console.log</span></code> line exists only so that
you can immediately check that your changes work.</p>
<p>Run the following to rebuild your extension.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">run</span> <span class="n">build</span>
</pre></div>
</div>
<p>JupyterLab will rebuild after the extension does. You can
see it’s progress in the <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span> <span class="pre">--watch</span></code> window. After that
finishes, return to the browser tab that opened when you
started JupyterLab. Refresh it and look in the console. You should see
the same activation message as before, plus the new message about the
ICommandPalette instance you just added. If you don’t, check the output
of the build command for errors and correct your code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>JupyterLab extension jupyterlab_xkcd is activated!
ICommandPalette: Palette {_palette: CommandPalette}
</pre></div>
</div>
<p>Note that we had to run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code> in order for the bundle to
update, because it is using the compiled JavaScript files in <code class="docutils literal notranslate"><span class="pre">/lib</span></code>.
If you wish to avoid running <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code> after each change, you
can open a third terminal, and run the <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">watch</span></code> command from
your extension directory, which will automatically compile the
TypeScript files as they change.</p>
<p>Now return to your editor. Add the following additional import to the
top of the file.</p>
<div class="code typescript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span>
  <span class="n">Widget</span>
<span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@phosphor/widgets&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Install this dependency as well:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">add</span> <span class="nd">@phosphor</span><span class="o">/</span><span class="n">widgets</span>
</pre></div>
</div>
<p>Then modify the <code class="docutils literal notranslate"><span class="pre">activate</span></code> function again so that it has the following
code:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">activate</span><span class="o">:</span> <span class="p">(</span><span class="nx">app</span>: <span class="kt">JupyterLab</span><span class="p">,</span> <span class="nx">palette</span>: <span class="kt">ICommandPalette</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;JupyterLab extension jupyterlab_xkcd is activated!&#39;</span><span class="p">);</span>

  <span class="c1">// Create a single widget</span>
  <span class="kd">let</span> <span class="nx">widget</span>: <span class="kt">Widget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Widget</span><span class="p">();</span>
  <span class="nx">widget</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">&#39;xkcd-jupyterlab&#39;</span><span class="p">;</span>
  <span class="nx">widget</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;xkcd.com&#39;</span><span class="p">;</span>
  <span class="nx">widget</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">closable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="c1">// Add an application command</span>
  <span class="kr">const</span> <span class="nx">command</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;xkcd:open&#39;</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">addCommand</span><span class="p">(</span><span class="nx">command</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Random xkcd comic&#39;</span><span class="p">,</span>
    <span class="nx">execute</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">widget</span><span class="p">.</span><span class="nx">isAttached</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Attach the widget to the main work area if it&#39;s not there</span>
        <span class="nx">app</span><span class="p">.</span><span class="nx">shell</span><span class="p">.</span><span class="nx">addToMainArea</span><span class="p">(</span><span class="nx">widget</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="c1">// Activate the widget</span>
      <span class="nx">app</span><span class="p">.</span><span class="nx">shell</span><span class="p">.</span><span class="nx">activateById</span><span class="p">(</span><span class="nx">widget</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="c1">// Add the command to the palette.</span>
  <span class="nx">palette</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span><span class="nx">command</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;Tutorial&#39;</span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first new block of code creates a <code class="docutils literal notranslate"><span class="pre">Widget</span></code> instance, assigns it a
unique ID, gives it a label that will appear as its tab title, and makes
the tab closable by the user. The second block of code add a new command
labeled <em>Random xkcd comic</em> to JupyterLab. When the command executes,
it attaches the widget to the main display area if it is not already
present and then makes it the active tab. The last new line of code adds
the command to the command palette in a section called <em>Tutorial</em>.</p>
<p>Build your extension again using <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code> (unless you are using
<code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">watch</span></code> already) and refresh the browser tab. Open the command
palette on the left side by clicking on <em>Commands</em> and type <em>xkcd</em> in
the search box. Your <em>Random xkcd comic</em>
command should appear. Click it or select it with the keyboard and press
<em>Enter</em>. You should see a new, blank panel appear with the tab title
<em>xkcd.com</em>. Click the <em>x</em> on the tab to close it and activate the
command again. The tab should reappear. Finally, click one of the
launcher tabs so that the <em>xkcd.com</em> panel is still open but no longer
active. Now run the <em>Random xkcd comic</em> command one more time. The
single <em>xkcd.com</em> tab should come to the foreground.</p>
<p><img alt="Empty xkcd extension panel" src="../_images/xkcd_tutorial_empty.png" /></p>
<p>If your widget is not behaving, compare your code with the reference
project state at the <a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd/tree/0.34-01-show-a-panel">01-show-a-panel
tag</a>.
Once you’ve got everything working properly, git commit your changes and
carry on.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git add .
git commit -m <span class="s1">&#39;Show xkcd command on panel&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="show-a-comic-in-the-panel">
<h3>Show a comic in the panel<a class="headerlink" href="#show-a-comic-in-the-panel" title="Permalink to this headline">¶</a></h3>
<p>You’ve got an empty panel. It’s time to add a comic to it. Go back to
your code editor. Add the following code below the lines that create a
<code class="docutils literal notranslate"><span class="pre">Widget</span></code> instance and above the lines that define the command.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Add an image element to the panel</span>
<span class="kd">let</span> <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
<span class="nx">widget</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>

<span class="c1">// Fetch info about a random comic</span>
<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https:////egszlpbmle.execute-api.us-east-1.amazonaws.com/prod&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">img</span><span class="p">;</span>
  <span class="nx">img</span><span class="p">.</span><span class="nx">alt</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
  <span class="nx">img</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">alt</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The first two lines create a new HTML <code class="docutils literal notranslate"><span class="pre">&lt;img&gt;</span></code> element and add it to
the widget DOM node. The next lines make a request using the HTML
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">fetch</a>
API that returns information about a random xkcd comic, and set the
image source, alternate text, and title attributes based on the
response.</p>
<p>Rebuild your extension if necessary (<code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code>), refresh your
browser tab, and run the <em>Random xkcd comic</em> command again. You should
now see a comic in the xkcd.com panel when it opens.</p>
<p><img alt="Single xkcd extension panel" src="../_images/xkcd_tutorial_single.png" /></p>
<p>Note that the comic is not centered in the panel nor does the panel
scroll if the comic is larger than the panel area. Also note that the
comic does not update no matter how many times you close and reopen the
panel. You’ll address both of these problems in the upcoming sections.</p>
<p>If you don’t see a comic at all, compare your code with the
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd/tree/0.34-02-show-a-comic">02-show-a-comic
tag</a>
in the reference project. When it’s working, make another git commit.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Show a comic in the panel&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="improve-the-widget-behavior">
<h2>Improve the widget behavior<a class="headerlink" href="#improve-the-widget-behavior" title="Permalink to this headline">¶</a></h2>
<div class="section" id="center-the-comic-and-add-attribution">
<h3>Center the comic and add attribution<a class="headerlink" href="#center-the-comic-and-add-attribution" title="Permalink to this headline">¶</a></h3>
<p>Open <code class="docutils literal notranslate"><span class="pre">style/index.css</span></code> in our extension project directory for editing.
Add the following lines to it.</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">jp-xkcdWidget</span> <span class="p">{</span>
    <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
    <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
    <span class="k">overflow</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">jp-xkcdCartoon</span> <span class="p">{</span>
    <span class="k">margin</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">jp-xkcdAttribution</span> <span class="p">{</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span> <span class="kc">auto</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The first rule stacks content vertically within the widget panel and
lets the panel scroll when the content overflows. The other rules center
the cartoon and attribution badge horizontally and space them out
vertically.</p>
<p>Return to the <code class="docutils literal notranslate"><span class="pre">index.ts</span></code> file. Note that there is already an import of
the CSS file in the <code class="docutils literal notranslate"><span class="pre">index.ts</span></code> file. Modify the the <code class="docutils literal notranslate"><span class="pre">activate</span></code>
function to apply the CSS classes and add the attribution badge markup.
The beginning of the function should read like the following:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="nx">activate</span><span class="o">:</span> <span class="p">(</span><span class="nx">app</span>: <span class="kt">JupyterLab</span><span class="p">,</span> <span class="nx">palette</span>: <span class="kt">ICommandPalette</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;JupyterLab extension jupyterlab_xkcd is activated!&#39;</span><span class="p">);</span>

  <span class="c1">// Create a single widget</span>
  <span class="kd">let</span> <span class="nx">widget</span>: <span class="kt">Widget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Widget</span><span class="p">();</span>
  <span class="nx">widget</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">&#39;xkcd-jupyterlab&#39;</span><span class="p">;</span>
  <span class="nx">widget</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;xkcd.com&#39;</span><span class="p">;</span>
  <span class="nx">widget</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">closable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="hll">  <span class="nx">widget</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;jp-xkcdWidget&#39;</span><span class="p">);</span> <span class="c1">// new line</span>
</span>
  <span class="c1">// Add an image element to the panel</span>
  <span class="kd">let</span> <span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
<span class="hll">  <span class="nx">img</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;jp-xkcdCartoon&#39;</span><span class="p">;</span> <span class="c1">// new line</span>
</span>  <span class="nx">widget</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>

<span class="hll">  <span class="c1">// New: add an attribution badge</span>
</span><span class="hll">  <span class="nx">img</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;afterend&#39;</span><span class="p">,</span>
</span><span class="hll">    <span class="sb">`&lt;div class=&quot;jp-xkcdAttribution&quot;&gt;</span>
</span><span class="hll"><span class="sb">      &lt;a href=&quot;https://creativecommons.org/licenses/by-nc/2.5/&quot; class=&quot;jp-xkcdAttribution&quot; target=&quot;_blank&quot;&gt;</span>
</span><span class="hll"><span class="sb">        &lt;img src=&quot;https://licensebuttons.net/l/by-nc/2.5/80x15.png&quot; /&gt;</span>
</span><span class="hll"><span class="sb">      &lt;/a&gt;</span>
</span><span class="hll"><span class="sb">    &lt;/div&gt;`</span>
</span>  <span class="p">);</span>

  <span class="c1">// Keep all the remaining fetch and command lines the same</span>
  <span class="c1">// as before from here down ...</span>
</pre></div>
</div>
<p>Build your extension if necessary (<code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code>) and refresh your
JupyterLab browser tab. Invoke the <em>Random xkcd comic</em> command and
confirm the comic is centered with an attribution badge below it. Resize
the browser window or the panel so that the comic is larger than the
available area. Make sure you can scroll the panel over the entire area
of the comic.</p>
<p><img alt="Styled xkcd panel with attribution" src="../_images/xkcd_tutorial_complete.png" /></p>
<p>If anything is misbehaving, compare your code with the reference project
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd/tree/0.34-03-style-and-attribute">03-style-and-attribute
tag</a>.
When everything is working as expected, make another commit.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Add styling, attribution&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="show-a-new-comic-on-demand">
<h3>Show a new comic on demand<a class="headerlink" href="#show-a-new-comic-on-demand" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">activate</span></code> function has grown quite long, and there’s still more
functionality to add. You should refactor the code into two separate
parts:</p>
<ol class="arabic simple">
<li>An <code class="docutils literal notranslate"><span class="pre">XkcdWidget</span></code> that encapsulates the xkcd panel elements,
configuration, and soon-to-be-added update behavior</li>
<li>An <code class="docutils literal notranslate"><span class="pre">activate</span></code> function that adds the widget instance to the UI and
decide when the comic should refresh</li>
</ol>
<p>Start by refactoring the widget code into the new <code class="docutils literal notranslate"><span class="pre">XkcdWidget</span></code> class.
Add the following additional import to the top of the file.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span>
  <span class="nx">Message</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@phosphor/messaging&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Install this dependency:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">add</span> <span class="nd">@phosphor</span><span class="o">/</span><span class="n">messaging</span>
</pre></div>
</div>
<p>Then add the class just below the import statements in the <code class="docutils literal notranslate"><span class="pre">index.ts</span></code>
file.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * An xckd comic viewer.</span>
<span class="cm"> */</span>
<span class="kr">class</span> <span class="nx">XkcdWidget</span> <span class="kr">extends</span> <span class="nx">Widget</span> <span class="p">{</span>
  <span class="cm">/**</span>
<span class="cm">   * Construct a new xkcd widget.</span>
<span class="cm">   */</span>
  <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">super</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">&#39;xkcd-jupyterlab&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;xkcd.com&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">closable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;jp-xkcdWidget&#39;</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">img</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;jp-xkcdCartoon&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">img</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;afterend&#39;</span><span class="p">,</span>
      <span class="sb">`&lt;div class=&quot;jp-xkcdAttribution&quot;&gt;</span>
<span class="sb">        &lt;a href=&quot;https://creativecommons.org/licenses/by-nc/2.5/&quot; class=&quot;jp-xkcdAttribution&quot; target=&quot;_blank&quot;&gt;</span>
<span class="sb">          &lt;img src=&quot;https://licensebuttons.net/l/by-nc/2.5/80x15.png&quot; /&gt;</span>
<span class="sb">        &lt;/a&gt;</span>
<span class="sb">      &lt;/div&gt;`</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/**</span>
<span class="cm">   * The image element associated with the widget.</span>
<span class="cm">   */</span>
  <span class="nx">readonly</span> <span class="nx">img</span>: <span class="kt">HTMLImageElement</span><span class="p">;</span>

  <span class="cm">/**</span>
<span class="cm">   * Handle update requests for the widget.</span>
<span class="cm">   */</span>
  <span class="nx">onUpdateRequest</span><span class="p">(</span><span class="nx">msg</span>: <span class="kt">Message</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://egszlpbmle.execute-api.us-east-1.amazonaws.com/prod&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">img</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">alt</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">img</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">alt</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>You’ve written all of the code before. All you’ve done is restructure it
to use instance variables and move the comic request to its own
function.</p>
<p>Next move the remaining logic in <code class="docutils literal notranslate"><span class="pre">activate</span></code> to a new, top-level
function just below the <code class="docutils literal notranslate"><span class="pre">XkcdWidget</span></code> class definition. Modify the code
to create a widget when one does not exist in the main JupyterLab area
or to refresh the comic in the exist widget when the command runs again.
The code for the <code class="docutils literal notranslate"><span class="pre">activate</span></code> function should read as follows after
these changes:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Activate the xckd widget extension.</span>
<span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">activate</span><span class="p">(</span><span class="nx">app</span>: <span class="kt">JupyterLab</span><span class="p">,</span> <span class="nx">palette</span>: <span class="kt">ICommandPalette</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;JupyterLab extension jupyterlab_xkcd is activated!&#39;</span><span class="p">);</span>

  <span class="c1">// Create a single widget</span>
  <span class="kd">let</span> <span class="nx">widget</span>: <span class="kt">XkcdWidget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XkcdWidget</span><span class="p">();</span>

  <span class="c1">// Add an application command</span>
  <span class="kr">const</span> <span class="nx">command</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;xkcd:open&#39;</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">addCommand</span><span class="p">(</span><span class="nx">command</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Random xkcd comic&#39;</span><span class="p">,</span>
    <span class="nx">execute</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">widget</span><span class="p">.</span><span class="nx">isAttached</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Attach the widget to the main work area if it&#39;s not there</span>
        <span class="nx">app</span><span class="p">.</span><span class="nx">shell</span><span class="p">.</span><span class="nx">addToMainArea</span><span class="p">(</span><span class="nx">widget</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="c1">// Refresh the comic in the widget</span>
      <span class="nx">widget</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
      <span class="c1">// Activate the widget</span>
      <span class="nx">app</span><span class="p">.</span><span class="nx">shell</span><span class="p">.</span><span class="nx">activateById</span><span class="p">(</span><span class="nx">widget</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="c1">// Add the command to the palette.</span>
  <span class="nx">palette</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;Tutorial&#39;</span> <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Remove the <code class="docutils literal notranslate"><span class="pre">activate</span></code> function definition from the
<code class="docutils literal notranslate"><span class="pre">JupyterLabPlugin</span></code> object and refer instead to the top-level function
like so:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">extension</span>: <span class="kt">JupyterLabPlugin</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;jupyterlab_xkcd&#39;</span><span class="p">,</span>
  <span class="nx">autoStart</span>: <span class="kt">true</span><span class="p">,</span>
  <span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="nx">ICommandPalette</span><span class="p">],</span>
  <span class="nx">activate</span>: <span class="kt">activate</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Make sure you retain the <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">default</span> <span class="pre">extension;</span></code> line in the file.
Now build the extension again and refresh the JupyterLab browser tab.
Run the <em>Random xkcd comic</em> command more than once without closing the
panel. The comic should update each time you execute the command. Close
the panel, run the command, and it should both reappear and show a new
comic.</p>
<p>If anything is amiss, compare your code with the
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd/tree/0.34-04-refactor-and-refresh">04-refactor-and-refresh
tag</a>
to debug. Once it’s working properly, commit it.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Refactor, refresh comic&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="restore-panel-state-when-the-browser-refreshes">
<h3>Restore panel state when the browser refreshes<a class="headerlink" href="#restore-panel-state-when-the-browser-refreshes" title="Permalink to this headline">¶</a></h3>
<p>You may notice that every time you refresh your browser tab, the xkcd
panel disappears, even if it was open before you refreshed. Other open
panels, like notebooks, terminals, and text editors, all reappear and
return to where you left them in the panel layout. You can make your
extension behave this way too.</p>
<p>Update the imports at the top of your <code class="docutils literal notranslate"><span class="pre">index.ts</span></code> file so that the
entire list of import statements looks like the following:</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span>
<span class="hll">  <span class="nx">JupyterLab</span><span class="p">,</span> <span class="nx">JupyterLabPlugin</span><span class="p">,</span> <span class="nx">ILayoutRestorer</span> <span class="c1">// new</span>
</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@jupyterlab/application&#39;</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span>
<span class="hll">  <span class="nx">ICommandPalette</span><span class="p">,</span> <span class="nx">InstanceTracker</span> <span class="c1">// new</span>
</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@jupyterlab/apputils&#39;</span><span class="p">;</span>

<span class="hll"><span class="kr">import</span> <span class="p">{</span>
</span><span class="hll">  <span class="nx">JSONExt</span> <span class="c1">// new</span>
</span><span class="hll"><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@phosphor/coreutils&#39;</span><span class="p">;</span>
</span>
<span class="kr">import</span> <span class="p">{</span>
  <span class="nx">Message</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@phosphor/messaging&#39;</span><span class="p">;</span>

<span class="kr">import</span> <span class="p">{</span>
  <span class="nx">Widget</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@phosphor/widgets&#39;</span><span class="p">;</span>

<span class="kr">import</span> <span class="s1">&#39;../style/index.css&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>Install this dependency:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">add</span> <span class="nd">@phosphor</span><span class="o">/</span><span class="n">coreutils</span>
</pre></div>
</div>
<p>Then, add the <code class="docutils literal notranslate"><span class="pre">ILayoutRestorer</span></code> interface to the <code class="docutils literal notranslate"><span class="pre">JupyterLabPlugin</span></code>
definition. This addition passes the global <code class="docutils literal notranslate"><span class="pre">LayoutRestorer</span></code> to the
third parameter of the <code class="docutils literal notranslate"><span class="pre">activate</span></code>.</p>
<div class="code typescript highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">const</span> <span class="n">extension</span><span class="p">:</span> <span class="n">JupyterLabPlugin</span><span class="o">&lt;</span><span class="n">void</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nb">id</span><span class="p">:</span> <span class="s1">&#39;jupyterlab_xkcd&#39;</span><span class="p">,</span>
  <span class="n">autoStart</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="n">requires</span><span class="p">:</span> <span class="p">[</span><span class="n">ICommandPalette</span><span class="p">,</span> <span class="n">ILayoutRestorer</span><span class="p">],</span>
  <span class="n">activate</span><span class="p">:</span> <span class="n">activate</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Finally, rewrite the <code class="docutils literal notranslate"><span class="pre">activate</span></code> function so that it:</p>
<ol class="arabic simple">
<li>Declares a widget variable, but does not create an instance
immediately</li>
<li>Constructs an <code class="docutils literal notranslate"><span class="pre">InstanceTracker</span></code> and tells the <code class="docutils literal notranslate"><span class="pre">ILayoutRestorer</span></code>
to use it to save/restore panel state</li>
<li>Creates, tracks, shows, and refreshes the widget panel appropriately</li>
</ol>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">activate</span><span class="p">(</span><span class="nx">app</span>: <span class="kt">JupyterLab</span><span class="p">,</span> <span class="nx">palette</span>: <span class="kt">ICommandPalette</span><span class="p">,</span> <span class="nx">restorer</span>: <span class="kt">ILayoutRestorer</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;JupyterLab extension jupyterlab_xkcd is activated!&#39;</span><span class="p">);</span>

  <span class="c1">// Declare a widget variable</span>
  <span class="kd">let</span> <span class="nx">widget</span>: <span class="kt">XkcdWidget</span><span class="p">;</span>

  <span class="c1">// Add an application command</span>
  <span class="kr">const</span> <span class="nx">command</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;xkcd:open&#39;</span><span class="p">;</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">addCommand</span><span class="p">(</span><span class="nx">command</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Random xkcd comic&#39;</span><span class="p">,</span>
    <span class="nx">execute</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">widget</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Create a new widget if one does not exist</span>
        <span class="nx">widget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XkcdWidget</span><span class="p">();</span>
        <span class="nx">widget</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">tracker</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">widget</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// Track the state of the widget for later restoration</span>
        <span class="nx">tracker</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">widget</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">widget</span><span class="p">.</span><span class="nx">isAttached</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Attach the widget to the main work area if it&#39;s not there</span>
        <span class="nx">app</span><span class="p">.</span><span class="nx">shell</span><span class="p">.</span><span class="nx">addToMainArea</span><span class="p">(</span><span class="nx">widget</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Refresh the comic in the widget</span>
        <span class="nx">widget</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="c1">// Activate the widget</span>
      <span class="nx">app</span><span class="p">.</span><span class="nx">shell</span><span class="p">.</span><span class="nx">activateById</span><span class="p">(</span><span class="nx">widget</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="c1">// Add the command to the palette.</span>
  <span class="nx">palette</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span> <span class="nx">command</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;Tutorial&#39;</span> <span class="p">});</span>

  <span class="c1">// Track and restore the widget state</span>
  <span class="kd">let</span> <span class="nx">tracker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">InstanceTracker</span><span class="o">&lt;</span><span class="nx">Widget</span><span class="o">&gt;</span><span class="p">({</span> <span class="nx">namespace</span><span class="o">:</span> <span class="s1">&#39;xkcd&#39;</span> <span class="p">});</span>
  <span class="nx">restorer</span><span class="p">.</span><span class="nx">restore</span><span class="p">(</span><span class="nx">tracker</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">command</span><span class="p">,</span>
    <span class="nx">args</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">JSONExt</span><span class="p">.</span><span class="nx">emptyObject</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="s1">&#39;xkcd&#39;</span>
  <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Rebuild your extension one last time and refresh your browser tab.
Execute the <em>Random xkcd comic</em> command and validate that the panel
appears with a comic in it. Refresh the browser tab again. You should
see an xkcd panel appear immediately without running the command. Close
the panel and refresh the browser tab. You should not see an xkcd tab
after the refresh.</p>
<p>Refer to the <a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd/tree/0.34-05-restore-panel-state">05-restore-panel-state
tag</a>
if your extension is misbehaving. Make a commit when the state of your
extension persists properly.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Restore panel state&#39;</span>
</pre></div>
</div>
<p>Congrats! You’ve implemented all of the behaviors laid out at the start
of this tutorial. Now how about sharing it with the world?</p>
</div>
</div>
<div class="section" id="publish-your-extension-to-npmjs-org">
<span id="publish-your-extension-to-npmjsorg"></span><h2>Publish your extension to npmjs.org<a class="headerlink" href="#publish-your-extension-to-npmjs-org" title="Permalink to this headline">¶</a></h2>
<p>npm is both a JavaScript package manager and the de facto registry for
JavaScript software. You can <a class="reference external" href="https://www.npmjs.com/signup">sign up for an account on the npmjs.com
site</a> or create an account from the
command line by running <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">adduser</span></code> and entering values when
prompted. Create an account now if you do not already have one. If you
already have an account, login by running <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">login</span></code> and answering
the prompts.</p>
<p>Next, open the project <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file in your text editor. Prefix
the <code class="docutils literal notranslate"><span class="pre">name</span></code> field value with <code class="docutils literal notranslate"><span class="pre">&#64;your-npm-username&gt;/</span></code> so that the
entire field reads <code class="docutils literal notranslate"><span class="pre">&quot;name&quot;:</span> <span class="pre">&quot;&#64;your-npm-username/jupyterlab_xkcd&quot;</span></code> where
you’ve replaced the string <code class="docutils literal notranslate"><span class="pre">your-npm-username</span></code> with your real
username. Review the homepage, repository, license, and <a class="reference external" href="https://docs.npmjs.com/files/package.json">other supported
package.json</a> fields while
you have the file open. Then open the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file and adjust the
command in the <em>Installation</em> section so that it includes the full,
username-prefixed package name you just included in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code>
file. For example:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="nd">@your</span><span class="o">-</span><span class="n">npm</span><span class="o">-</span><span class="n">username</span><span class="o">/</span><span class="n">jupyterlab_xkcd</span>
</pre></div>
</div>
<p>Return to your terminal window and make one more git commit:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Prepare to publish package&#39;</span>
</pre></div>
</div>
<p>Now run the following command to publish your package:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">publish</span> <span class="o">--</span><span class="n">access</span><span class="o">=</span><span class="n">public</span>
</pre></div>
</div>
<p>Check that your package appears on the npm website. You can either
search for it from the homepage or visit
<code class="docutils literal notranslate"><span class="pre">https://www.npmjs.com/package/&#64;your-username/jupyterlab_xkcd</span></code>
directly. If it doesn’t appear, make sure you’ve updated the package
name properly in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> and run the npm command correctly.
Compare your work with the state of the reference project at the
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab_xkcd/tree/0.34-06-prepare-to-publish">06-prepare-to-publish
tag</a>
for further debugging.</p>
<p><img alt="Extension page on npmjs.com" src="../_images/xkcd_tutorial_npm.png" /></p>
<p>You can now try installing your extension as a user would. Open a new
terminal and run the following commands, again substituting your npm
username where appropriate
(make sure to stop the existing <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span> <span class="pre">--watch</span></code> command first):</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">jupyterlab</span><span class="o">-</span><span class="n">xkcd</span> <span class="n">jupyterlab</span> <span class="n">nodejs</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">jupyterlab</span><span class="o">-</span><span class="n">xkcd</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span> <span class="nd">@your</span><span class="o">-</span><span class="n">npm</span><span class="o">-</span><span class="n">username</span><span class="o">/</span><span class="n">jupyterlab_xkcd</span>
<span class="n">jupyter</span> <span class="n">lab</span>
</pre></div>
</div>
<p>You should see a fresh JupyterLab browser tab appear. When it does,
execute the <em>Random xkcd comic</em> command to prove that your extension
works when installed from npm.</p>
</div>
<div class="section" id="learn-more">
<h2>Learn more<a class="headerlink" href="#learn-more" title="Permalink to this headline">¶</a></h2>
<p>You’ve completed the tutorial. Nicely done! If you want to keep
learning, here are some suggestions about what to try next:</p>
<ul class="simple">
<li>Assign a hotkey to the <em>Random xkcd comic</em> command.</li>
<li>Make the image a link to the comic on <a class="reference external" href="https://xkcd.com">https://xkcd.com</a>.</li>
<li>Push your extension git repository to GitHub.</li>
<li>Give users the ability to pin comics in separate, permanent panels.</li>
<li>Learn how to write <a class="reference external" href="./extension_dev.html">other kinds of
extensions</a>.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="terminology.html" class="btn btn-neutral" title="Terminology" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Project Jupyter.<br/>
        The Jupyter Trademark is registered with the U.S. Patent &amp Trademark Office.
        

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.18.4',
            LANGUAGE:'zh-cn',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>