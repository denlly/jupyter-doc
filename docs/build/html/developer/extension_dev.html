

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-cn" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-cn" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Extension Developer Guide &mdash; JupyterLab 0.18.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Documents" href="documents.html" />
    <link rel="prev" title="General Codebase Orientation" href="repo.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> JupyterLab
          

          
          </a>

          
            
            
              <div class="version">
                0.18.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/starting.html">Starting JupyterLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/changelog.html">JupyterLab Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/interface.html">The JupyterLab Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/urls.html">JupyterLab URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/files.html">Working with Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/file_editor.html">Text Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/notebook.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/code_console.html">Code Consoles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/terminal.html">Terminals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/running.html">Managing Kernels and Terminals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/commands.html">Command Palette</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/documents_kernels.html">Documents and Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/file_formats.html">File and Output Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/jupyterhub.html">JupyterLab on JupyterHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="repo.html">General Codebase Orientation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Extension Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#plugins">Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-object">Application Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#jupyterlab-shell">JupyterLab Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phosphor">Phosphor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extension-authoring">Extension Authoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mime-renderer-extensions">Mime Renderer Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#themes">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standard-general-purpose-extensions">Standard (General-Purpose) Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#core-tokens">Core Tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="#standard-extension-example">Standard Extension Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storing-extension-data">Storing Extension Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#extension-settings">Extension Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#state-database">State Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#context-menus">Context Menus</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="documents.html">Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="documents.html#overview-of-document-architecture">Overview of document architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="css.html">CSS Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtualdom.html">Virtual DOM and React</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_content.html">Adding Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="xkcd_extension_tutorial.html">Let’s Make an xkcd JupyterLab Extension</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">JupyterLab</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
  <li><a href="../index.html">Docs</a> &raquo;</li>
    
  <li>Extension Developer Guide</li>

    
    <li class="wy-breadcrumbs-aside">
    
      
      
        <a href="https://github.com/denlly/jupyter-doc/blob/master/docs/source/developer/extension_dev.rst" class="fa fa-github"> Edit on GitHub</a>
      
      
    
    </li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://jupyter.org/documentation">
        <img src="../_static/jupyter_logo.svg"></img>
        Jupyter
      </a>
      &vert;
      &nbsp;
    </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extension-developer-guide">
<span id="developer-extensions"></span><h1>Extension Developer Guide<a class="headerlink" href="#extension-developer-guide" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The extension developer API is not stable and will evolve in JupyterLab
releases in the near future.</p>
</div>
<p>JupyterLab can be extended in four ways via:</p>
<ul class="simple">
<li><strong>application plugins (top level):</strong> Application plugins extend the
functionality of JupyterLab itself.</li>
<li><strong>mime renderer extensions (top level):</strong> Mime Renderer extensions are
a convenience for creating an extension that can render mime data and
potentially render files of a given type.</li>
<li><strong>theme extensions (top level):</strong> Theme extensions allow you to customize the appearance of
JupyterLab by adding your own fonts, CSS rules, and graphics to the application.</li>
<li><strong>document widget extensions (lower level):</strong> Document widget extensions
extend the functionality of document widgets added to the
application, and we cover them in <a class="reference internal" href="documents.html#documents"><span class="std std-ref">Documents</span></a>.</li>
</ul>
<p>See <a class="reference internal" href="xkcd_extension_tutorial.html#xkcd-extension-tutorial"><span class="std std-ref">Let’s Make an xkcd JupyterLab Extension</span></a> to learn how to make a simple JupyterLab extension.</p>
<p>To understand how to wrap an <strong>Angular</strong> application as a JupyterLab extension,
see the <a class="reference external" href="https://github.com/SimonBiggs/scriptedforms/blob/master/scriptedforms/docs/create-your-own-angular-jupyterlab-extension.md#create-your-own-angular-jupyerlab-extension">“Create your own Angular JupyerLab extension”</a> guide provided by
<a class="reference external" href="https://github.com/SimonBiggs/scriptedforms">Scripted Forms</a>.</p>
<p>A JupyterLab application is comprised of:</p>
<ul class="simple">
<li>A core Application object</li>
<li>Plugins</li>
</ul>
<div class="section" id="plugins">
<h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<p>A plugin adds a core functionality to the application:</p>
<ul>
<li><p class="first">A plugin can require other plugins for operation.</p>
</li>
<li><p class="first">A plugin is activated when it is needed by other plugins, or when
explicitly activated.</p>
</li>
<li><p class="first">Plugins require and provide <code class="docutils literal notranslate"><span class="pre">Token</span></code> objects, which are used to
provide a typed value to the plugin’s <code class="docutils literal notranslate"><span class="pre">activate()</span></code> method.</p>
</li>
<li><p class="first">The module providing plugin(s) must meet the
<a class="reference external" href="http://jupyterlab.github.io/jupyterlab/interfaces/_application_src_index_.jupyterlab.ipluginmodule.html">JupyterLab.IPluginModule</a>
interface, by exporting a plugin object or array of plugin objects as
the default export.</p>
<p>We provide two cookie cutters to create JuptyerLab plugin extensions in
<a class="reference external" href="https://github.com/jupyterlab/extension-cookiecutter-js">CommonJS</a> and
<a class="reference external" href="https://github.com/jupyterlab/extension-cookiecutter-ts">TypeScript</a>.</p>
</li>
</ul>
<p>The default plugins in the JupyterLab application include:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/terminal-extension/src/index.ts">Terminal</a>
- Adds the ability to create command prompt terminals.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/shortcuts-extension/src/index.ts">Shortcuts</a>
- Sets the default set of shortcuts for the application.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/imageviewer-extension/src/index.ts">Images</a>
- Adds a widget factory for displaying image files.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/help-extension/src/index.tsx">Help</a>
- Adds a side bar widget for displaying external documentation.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/filebrowser-extension/src/index.ts">File
Browser</a>
- Creates the file browser and the document manager and the file
browser to the side bar.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/fileeditor-extension/src/index.ts">Editor</a>
- Add a widget factory for displaying editable source files.</li>
<li><a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/packages/console-extension/src/index.ts">Console</a>
- Adds the ability to launch Jupyter Console instances for
interactive kernel console sessions.</li>
</ul>
<p>A dependency graph for the core JupyterLab plugins (along with links to
their source) is shown here: <img alt="dependencies" src="../_images/dependency-graph.svg" /></p>
</div>
<div class="section" id="application-object">
<h2>Application Object<a class="headerlink" href="#application-object" title="Permalink to this headline">¶</a></h2>
<p>The JupyterLab Application object is given to each plugin in its
<code class="docutils literal notranslate"><span class="pre">activate()</span></code> function. The Application object has a:</p>
<ul class="simple">
<li>commands - used to add and execute commands in the application.</li>
<li>keymap - used to add keyboard shortcuts to the application.</li>
<li>shell - a JupyterLab shell instance.</li>
</ul>
</div>
<div class="section" id="jupyterlab-shell">
<h2>JupyterLab Shell<a class="headerlink" href="#jupyterlab-shell" title="Permalink to this headline">¶</a></h2>
<p>The JupyterLab
<a class="reference external" href="http://jupyterlab.github.io/jupyterlab/classes/_application_src_shell_.applicationshell.html">shell</a>
is used to add and interact with content in the application. The
application consists of:</p>
<ul class="simple">
<li>A top area for things like top level menus and toolbars</li>
<li>Left and right side bar areas for collapsible content</li>
<li>A main work area for user activity.</li>
<li>A bottom area for things like status bars</li>
</ul>
</div>
<div class="section" id="phosphor">
<h2>Phosphor<a class="headerlink" href="#phosphor" title="Permalink to this headline">¶</a></h2>
<p>The Phosphor library is used as the underlying architecture of
JupyterLab and provides many of the low level primitives and widget
structure used in the application. Phosphor provides a rich set of
widgets for developing desktop-like applications in the browser, as well
as patterns and objects for writing clean, well-abstracted code. The
widgets in the application are primarily <strong>Phosphor widgets</strong>, and
Phosphor concepts, like message passing and signals, are used
throughout. <strong>Phosphor messages</strong> are a <em>many-to-one</em> interaction that
enables information like resize events to flow through the widget
hierarchy in the application. <strong>Phosphor signals</strong> are a <em>one-to-many</em>
interaction that enable listeners to react to changes in an observed
object.</p>
</div>
<div class="section" id="extension-authoring">
<h2>Extension Authoring<a class="headerlink" href="#extension-authoring" title="Permalink to this headline">¶</a></h2>
<p>An Extension is a valid <a class="reference external" href="https://docs.npmjs.com/getting-started/what-is-npm">npm
package</a> that
meets the following criteria:</p>
<ul class="simple">
<li>Exports one or more JupyterLab plugins as the default export in its
main file.</li>
<li>Has a <code class="docutils literal notranslate"><span class="pre">jupyterlab</span></code> key in its <code class="docutils literal notranslate"><span class="pre">package.json</span></code> which has
<code class="docutils literal notranslate"><span class="pre">&quot;extension&quot;</span></code> metadata. The value can be <code class="docutils literal notranslate"><span class="pre">true</span></code> to use the main
module of the package, or a string path to a specific module (e.g.
<code class="docutils literal notranslate"><span class="pre">&quot;lib/foo&quot;</span></code>).</li>
</ul>
<p>While authoring the extension, you can use the command:</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span>   <span class="c1"># install npm package dependencies</span>
<span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>  <span class="c1"># optional build step if using TypeScript, babel, etc.</span>
<span class="n">jupyter</span> <span class="n">labextension</span> <span class="n">install</span>  <span class="c1"># install the current directory as an extension</span>
</pre></div>
</div>
<p>This causes the builder to re-install the source folder before building
the application files. You can re-build at any time using
<code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">lab</span> <span class="pre">build</span></code> and it will reinstall these packages. You can also
link other local npm packages that you are working on simultaneously
using <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">link</span></code>; they will be re-installed but not
considered as extensions. Local extensions and linked packages are
included in <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">list</span></code>.</p>
<p>When using local extensions and linked packages, you can run the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">lab</span> <span class="o">--</span><span class="n">watch</span>
</pre></div>
</div>
<p>This will cause the application to incrementally rebuild when one of the
linked packages changes. Note that only compiled JavaScript files (and
the CSS files) are watched by the WebPack process. This means that if
your extension is in TypeScript you’ll have to run a <cite>jlpm run build</cite>
before the changes will be reflected in JupyterLab. To avoid this step
you can also watch the TypeScript sources in your extension which is
usually assigned to the <cite>tsc -w</cite> shortcut.</p>
<p>Note that the application is built against <strong>released</strong> versions of the
core JupyterLab extensions. If your extension depends on JupyterLab
packages, it should be compatible with the dependencies in the
<code class="docutils literal notranslate"><span class="pre">jupyterlab/static/package.json</span></code> file.  Note that building will always use the latest JavaScript packages that meet the dependency requirements of JupyterLab itself and any installed extensions.  If you wish to test against a
specific patch release of one of the core JupyterLab packages you can
temporarily pin that requirement to a specific version in your own
dependencies.</p>
<p>If you must install a extension into a development branch of JupyterLab, you have to graft it into the source tree of JupyterLab itself. This may be done using the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">run</span> <span class="n">add</span><span class="p">:</span><span class="n">sibling</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="ow">or</span><span class="o">-</span><span class="n">url</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>in the JupyterLab root directory, where <code class="docutils literal notranslate"><span class="pre">&lt;path-or-url&gt;</span></code> refers either
to an extension npm package on the local file system, or a URL to a git
repository for an extension npm package. This operation may be
subsequently reversed by running</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jlpm</span> <span class="n">run</span> <span class="n">remove</span><span class="p">:</span><span class="n">package</span> <span class="o">&lt;</span><span class="n">extension</span><span class="o">-</span><span class="nb">dir</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This will remove the package metadata from the source tree, but will
<strong>not</strong> remove any files added by the <code class="docutils literal notranslate"><span class="pre">addsibling</span></code> script, which
should be removed manually.</p>
<p>The package should export EMCAScript 5 compatible JavaScript. It can
import CSS using the syntax <code class="docutils literal notranslate"><span class="pre">require('foo.css')</span></code>. The CSS files can
also import CSS from other packages using the syntax
<code class="docutils literal notranslate"><span class="pre">&#64;import</span> <span class="pre">url('~foo/index.css')</span></code>, where <code class="docutils literal notranslate"><span class="pre">foo</span></code> is the name of the
package.</p>
<p>The following file types are also supported (both in JavaScript and
CSS): json, html, jpg, png, gif, svg, js.map, woff2, ttf, eot.</p>
<p>If your package uses any other file type it must be converted to one of
the above types. If your JavaScript is written in any other dialect than
EMCAScript 5 it must be converted using an appropriate tool.</p>
<p>If you publish your extension on npm.org, users will be able to install
it as simply <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span> <span class="pre">&lt;foo&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;foo&gt;</span></code> is
the name of the published npm package. You can alternatively provide a
script that runs <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span></code> against a local folder
path on the user’s machine or a provided tarball. Any valid
<code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span></code> specifier can be used in
<code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">foo&#64;latest</span></code>, <code class="docutils literal notranslate"><span class="pre">bar&#64;3.0.0.0</span></code>,
<code class="docutils literal notranslate"><span class="pre">path/to/folder</span></code>, and <code class="docutils literal notranslate"><span class="pre">path/to/tar.gz</span></code>).</p>
<p>There are a number of helper functions in <cite>testutils</cite> in this repo (which is a public npm package called <cite>&#64;jupyterlab/testutils</cite>) that can be used when writing
tests for an extension.  See <cite>tests/test-application</cite> for an example of the infrastructure needed to run tests.  There is a <cite>karma</cite> config file that points
to the parent directory’s <cite>karma</cite> config, and a test runner, <cite>run-test.py</cite> that
starts a Jupyter server.</p>
</div>
<div class="section" id="mime-renderer-extensions">
<h2>Mime Renderer Extensions<a class="headerlink" href="#mime-renderer-extensions" title="Permalink to this headline">¶</a></h2>
<p>Mime Renderer extensions are a convenience for creating an extension
that can render mime data and potentially render files of a given type.
We provide cookiecutters for Mime render extensions in
<a class="reference external" href="https://github.com/jupyterlab/mimerender-cookiecutter">JavaScript</a> and
<a class="reference external" href="https://github.com/jupyterlab/mimerender-cookiecutter-ts">TypeScript</a>.</p>
<p>Mime renderer extensions are more declarative than standard extensions.
The extension is treated the same from the command line perspective
(<code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">labextension</span> <span class="pre">install</span></code> ), but it does not directly create
JupyterLab plugins. Instead it exports an interface given in the
<a class="reference external" href="http://jupyterlab.github.io/jupyterlab/interfaces/_rendermime_interfaces_src_index_.irendermime.iextension.html">rendermime-interfaces</a>
package.</p>
<p>The JupyterLab repo has an example mime renderer extension for
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab/tree/master/packages/pdf-extension">pdf</a>
files. It provides a mime renderer for pdf data and registers itself as
a document renderer for pdf file types.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rendermime-interfaces</span></code> package is intended to be the only
JupyterLab package needed to create a mime renderer extension (using the
interfaces in TypeScript or as a form of documentation if using plain
JavaScript).</p>
<p>The only other difference from a standard extension is that has a
<code class="docutils literal notranslate"><span class="pre">jupyterlab</span></code> key in its <code class="docutils literal notranslate"><span class="pre">package.json</span></code> with <code class="docutils literal notranslate"><span class="pre">&quot;mimeExtension&quot;</span></code>
metadata. The value can be <code class="docutils literal notranslate"><span class="pre">true</span></code> to use the main module of the
package, or a string path to a specific module (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;lib/foo&quot;</span></code>).</p>
<p>The mime renderer can update its data by calling <code class="docutils literal notranslate"><span class="pre">.setData()</span></code> on the
model it is given to render. This can be used for example to add a
<code class="docutils literal notranslate"><span class="pre">png</span></code> representation of a dynamic figure, which will be picked up by a
notebook model and added to the notebook document. When using
<code class="docutils literal notranslate"><span class="pre">IDocumentWidgetFactoryOptions</span></code>, you can update the document model by
calling <code class="docutils literal notranslate"><span class="pre">.setData()</span></code> with updated data for the rendered MIME type. The
document can then be saved by the user in the usual manner.</p>
</div>
<div class="section" id="themes">
<h2>Themes<a class="headerlink" href="#themes" title="Permalink to this headline">¶</a></h2>
<p>A theme is a JupyterLab extension that uses a <code class="docutils literal notranslate"><span class="pre">ThemeManager</span></code> and can
be loaded and unloaded dynamically. The package must include all static
assets that are referenced by <code class="docutils literal notranslate"><span class="pre">url()</span></code> in its CSS files. Local URLs can
be used to reference files relative to the location of the referring CSS
file in the theme directory. For example <code class="docutils literal notranslate"><span class="pre">url('images/foo.png')</span></code> or
<code class="docutils literal notranslate"><span class="pre">url('../foo/bar.css')</span></code>can be used to refer local files in the
theme. Absolute URLs (starting with a <code class="docutils literal notranslate"><span class="pre">/</span></code>) or external URLs (e.g.
<code class="docutils literal notranslate"><span class="pre">https:</span></code>) can be used to refer to external assets. The path to the
theme assets is specified <code class="docutils literal notranslate"><span class="pre">package.json</span></code> under the <code class="docutils literal notranslate"><span class="pre">&quot;jupyterlab&quot;</span></code>
key as <code class="docutils literal notranslate"><span class="pre">&quot;themeDir&quot;</span></code>. See the <a class="reference external" href="https://github.com/jupyterlab/jupyterlab/tree/master/packages/theme-light-extension">JupyterLab Light
Theme</a>
for an example. Ensure that the theme files are included in the
<code class="docutils literal notranslate"><span class="pre">&quot;files&quot;</span></code> metadata in package.json. A theme can optionally specify an
<code class="docutils literal notranslate"><span class="pre">embed.css</span></code> file that can be consumed outside of a JupyterLab
application.</p>
<p>To quickly create a theme based on the JupyterLab Light Theme, follow
the instructions in the <a class="reference external" href="https://github.com/jupyterlab/jupyterlab/blob/master/CONTRIBUTING.md#setting-up-a-development-environment">contributing
guide</a> and
then run <code class="docutils literal notranslate"><span class="pre">jlpm</span> <span class="pre">run</span> <span class="pre">create:theme</span></code> from the repository root directory.
Once you select a name, title and a description, a new theme folder will
be created in the current directory. You can move that new folder to a
location of your choice, and start making desired changes.</p>
<p>The theme extension is installed in the same way as a regular extension (see
<a class="reference external" href="#extension-authoring">extension authoring</a>).</p>
</div>
<div class="section" id="standard-general-purpose-extensions">
<h2>Standard (General-Purpose) Extensions<a class="headerlink" href="#standard-general-purpose-extensions" title="Permalink to this headline">¶</a></h2>
<p>JupyterLab’s modular architecture is based around the idea
that all extensions are on equal footing, and that they interact
with each other through typed interfaces that are provided by <code class="docutils literal notranslate"><span class="pre">Token</span></code> objects.
An extension can provide a <code class="docutils literal notranslate"><span class="pre">Token</span></code> to the application,
which other extensions can then request for their own use.</p>
<div class="section" id="core-tokens">
<h3>Core Tokens<a class="headerlink" href="#core-tokens" title="Permalink to this headline">¶</a></h3>
<p>The core packages of JupyterLab provide a set of tokens,
which are listed here, along with short descriptions of when you
might want to use them in your extensions.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/application:ILayoutRestorer</span></code>: An interface to the application layout
restoration functionality. Use this to have your activities restored across
page loads.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/application:IMimeDocumentTracker</span></code>: An instance tracker for documents
rendered using a mime renderer extension. Use this if you want to list and interact
with documents rendered by such extensions.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/application:IRouter</span></code>: The URL router used by the application.
Use this to add custom URL-routing for your extension (e.g., to invoke
a command if the user navigates to a sub-path).</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/apputils:ICommandPalette</span></code>: An interface to the application command palette
in the left panel. Use this to add commands to the palette.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/apputils:ISplashScreen</span></code>: An interface to the splash screen for the application.
Use this if you want to show the splash screen for your own purposes.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/apputils:IThemeManager</span></code>: An interface to the theme manager for the application.
Most extensions will not need to use this, as they can register a
<a class="reference external" href="#themes">theme extension</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/apputils:IWindowResolver</span></code>: An interface to a window resolver for the
application. JupyterLab workspaces are given a name, which are determined using
the window resolver. Require this if you want to use the name of the current workspace.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/codeeditor:IEditorServices</span></code>: An interface to the text editor provider
for the application. Use this to create new text editors and host them in your
UI elements.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/completer:ICompletionManager</span></code>: An interface to the completion manager
for the application. Use this to allow your extension to invoke a completer.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/console:IConsoleTracker</span></code>: An instance tracker for code consoles.
Use this if you want to be able to iterate over and interact with code consoles
created by the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/console:IContentFactory</span></code>: A factory object that creates new code
consoles. Use this if you want to create and host code consoles in your own UI elements.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/coreutils:ISettingRegistry</span></code>: An interface to the JupyterLab settings system.
Use this if you want to store settings for your application.
See <a class="reference external" href="#extension-settings">extension settings</a> for more information.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/coreutils:IStateDB</span></code>: An interface to the JupyterLab state database.
Use this if you want to store data that will persist across page loads.
See <a class="reference external" href="#state-database">state database</a> for more information.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/docmanager:IDocumentManager</span></code>: An interface to the manager for all
documents used by the application. Use this if you want to open and close documents,
create and delete files, and otherwise interact with the file system.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/filebrowser:IFileBrowserFactory</span></code>: A factory object that creates file browsers.
Use this if you want to create your own file browser (e.g., for a custom storage backend),
or to interact with other file browsers that have been created by extensions.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/fileeditor:IEditorTracker</span></code>: An instance tracker for file editors.
Use this if you want to be able to iterate over and interact with file editors
created by the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/imageviewer:IImageTracker</span></code>: An instance tracker for images.
Use this if you want to be able to iterate over and interact with images
viewed by the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/inspector:IInspector</span></code>: An interface for adding variable inspectors to widgets.
Use this to add the ability to hook into the variable inspector to your extension.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/launcher:ILauncher</span></code>: An interface to the application activity launcher.
Use this to add your extension activities to the launcher panel.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/mainmenu:IMainMenu</span></code>: An interface to the main menu bar for the application.
Use this if you want to add your own menu items.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/notebook:ICellTools</span></code>: An interface to the <code class="docutils literal notranslate"><span class="pre">Cell</span> <span class="pre">Tools</span></code> panel in the
application left area. Use this to add your own functionality to the panel.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/notebook:IContentFactory</span></code>: A factory object that creates new notebooks.
Use this if you want to create and host notebooks in your own UI elements.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/notebook:INotebookTracker</span></code>: An instance tracker for code consoles.
Use this if you want to be able to iterate over and interact with notebooks
created by the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/rendermime:IRenderMimeRegistry</span></code>: An interface to the rendermime registry
for the application. Use this to create renderers for various mime-types in your extension.
Most extensions will not need to use this, as they can register a
<a class="reference external" href="#mime-renderer-extensions">mime renderer extension</a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/rendermime:ILatexTypesetter</span></code>: An interface to the LaTeX typesetter for the
application. Use this if you want to typeset math in your extension.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/settingeditor:ISettingEditorTracker</span></code>: An instance tracker for setting editors.
Use this if you want to be able to iterate over and interact with setting editors
created by the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/terminal:ITerminalTracker</span></code>: An instance tracker for terminals.
Use this if you want to be able to iterate over and interact with terminals
created by the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/tooltip:ITooltipManager</span></code>: An interface to the tooltip manager for the application.
Use this to allow your extension to invoke a tooltip.</li>
</ul>
</div>
<div class="section" id="standard-extension-example">
<h3>Standard Extension Example<a class="headerlink" href="#standard-extension-example" title="Permalink to this headline">¶</a></h3>
<p>For a concrete example of a standard extension, see <a class="reference external" href="./notebook.html#how-to-extend-the-notebook-plugin">How to Extend the Notebook
Plugin</a>. Notice
that the mime renderer and themes extensions above use a limited,
simplified interface to JupyterLab’s extension system. Modifying the
notebook plugin requires the full, general-purpose interface to the
extension system.</p>
</div>
<div class="section" id="storing-extension-data">
<h3>Storing Extension Data<a class="headerlink" href="#storing-extension-data" title="Permalink to this headline">¶</a></h3>
<p>In addition to the file system that is accessed by using the
<code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/services</span></code> package, JupyterLab offers two ways for
extensions to store data: a client-side state database that is built on
top of <code class="docutils literal notranslate"><span class="pre">localStorage</span></code> and a plugin settings system that provides for
default setting values and user overrides.</p>
<div class="section" id="extension-settings">
<h4>Extension Settings<a class="headerlink" href="#extension-settings" title="Permalink to this headline">¶</a></h4>
<p>An extension can specify user settings using a JSON Schema. The schema
definition should be in a file that resides in the <code class="docutils literal notranslate"><span class="pre">schemaDir</span></code>
directory that is specified in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> file of the
extension. The actual file name should use is the part that follows the
package name of extension. So for example, the JupyterLab
<code class="docutils literal notranslate"><span class="pre">apputils-extension</span></code> package hosts several plugins:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">'&#64;jupyterlab/apputils-extension:menu'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'&#64;jupyterlab/apputils-extension:palette'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'&#64;jupyterlab/apputils-extension:settings'</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">'&#64;jupyterlab/apputils-extension:themes'</span></code></li>
</ul>
<p>And in the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> for <code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/apputils-extension</span></code>, the
<code class="docutils literal notranslate"><span class="pre">schemaDir</span></code> field is a directory called <code class="docutils literal notranslate"><span class="pre">schema</span></code>. Since the
<code class="docutils literal notranslate"><span class="pre">themes</span></code> plugin requires a JSON schema, its schema file location is:
<code class="docutils literal notranslate"><span class="pre">schema/themes.json</span></code>. The plugin’s name is used to automatically
associate it with its settings file, so this naming convention is
important. Ensure that the schema files are included in the <code class="docutils literal notranslate"><span class="pre">&quot;files&quot;</span></code>
metadata in <code class="docutils literal notranslate"><span class="pre">package.json</span></code>.</p>
<p>See the
<a class="reference external" href="https://github.com/jupyterlab/jupyterlab/tree/master/packages/fileeditor-extension">fileeditor-extension</a>
for another example of an extension that uses settings.</p>
</div>
<div class="section" id="state-database">
<h4>State Database<a class="headerlink" href="#state-database" title="Permalink to this headline">¶</a></h4>
<p>The state database can be accessed by importing <code class="docutils literal notranslate"><span class="pre">IStateDB</span></code> from
<code class="docutils literal notranslate"><span class="pre">&#64;jupyterlab/coreutils</span></code> and adding it to the list of <code class="docutils literal notranslate"><span class="pre">requires</span></code> for
a plugin:</p>
<div class="code typescript highlight-default notranslate"><div class="highlight"><pre><span></span>const id = &#39;foo-extension:IFoo&#39;;

const IFoo = new Token&lt;IFoo&gt;(id);

interface IFoo {}

class Foo implements IFoo {}

const plugin: JupyterLabPlugin&lt;IFoo&gt; = {
  id,
  requires: [IStateDB],
  provides: IFoo,
  activate: (app: JupyterLab, state: IStateDB): IFoo =&gt; {
    const foo = new Foo();
    const key = `${id}:some-attribute`;

    // Load the saved plugin state and apply it once the app
    // has finished restoring its former layout.
    Promise.all([state.fetch(key), app.restored])
      .then(([saved]) =&gt; { /* Update `foo` with `saved`. */ });

    // Fulfill the plugin contract by returning an `IFoo`.
    return foo;
  },
  autoStart: true
};
</pre></div>
</div>
</div>
</div>
<div class="section" id="context-menus">
<h3>Context Menus<a class="headerlink" href="#context-menus" title="Permalink to this headline">¶</a></h3>
<p>JupyterLab has an application-wide context menu available as
<code class="docutils literal notranslate"><span class="pre">app.contextMenu</span></code>. See the Phosphor
<a class="reference external" href="http://phosphorjs.github.io/phosphor/api/widgets/interfaces/contextmenu.iitemoptions.html">docs</a>
for the item creation options. If you wish to preempt the
application context menu, you can use a ‘contextmenu’ event listener and
call <code class="docutils literal notranslate"><span class="pre">event.stopPropagation</span></code> to prevent the application context menu
handler from being called (it is listening in the bubble phase on the
<code class="docutils literal notranslate"><span class="pre">document</span></code>). At this point you could show your own Phosphor
<a class="reference external" href="http://phosphorjs.github.io/phosphor/api/widgets/classes/contextmenu.html">contextMenu</a>,
or simply stop propagation and let the system context menu be shown.
This would look something like the following in a <code class="docutils literal notranslate"><span class="pre">Widget</span></code> subclass:</p>
<div class="code javascript highlight-default notranslate"><div class="highlight"><pre><span></span>// In `onAfterAttach()`
this.node.addEventListener(&#39;contextmenu&#39;, this);

// In `handleEvent()`
case &#39;contextmenu&#39;:
  event.stopPropagation();
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="documents.html" class="btn btn-neutral float-right" title="Documents" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="repo.html" class="btn btn-neutral" title="General Codebase Orientation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Project Jupyter.<br/>
        The Jupyter Trademark is registered with the U.S. Patent &amp Trademark Office.
        

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.18.4',
            LANGUAGE:'zh-cn',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>